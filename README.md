# MovieMap — система рекомендаций фильмов

Веб-приложение для получения персонализированных рекомендаций фильмов.

## Возможности

- Просмотр персональных рекомендаций по ID пользователя
- Популярные фильмы у пользователей с похожим вкусом
- Поиск по названию фильма
- Фильтрация рекомендаций по жанрам, рейтингу и годам
- Просмотр похожих фильмов

1. Добавлена поддержка новых API-эндпоинтов:
   - `/recommend/similar-movies/{movie_id}` - похожие фильмы
   - `/recommend/by-similar-ones/{user_id}` - популярные у пользователей с похожим вкусом
   - `/movies/search?query=...` - поиск по названию
   - `/recommend/by-ratings{user_id}/filter` - фильтрация для рекомендаций на основе оценок
   - `/recommend/by-similar-ones/{user_id}/filter` - фильтрация для популярных фильмов
   - /movie/{movie_id} - детали фильма
2. Реализована серверная фильтрация рекомендаций
3. Добавлена поддержка переключения между различными типами рекомендаций
4. Базовый URL API вынесен в константу для облегчения связывания с бэком
5. Добавлена настройка прокси в Vite для решения проблем с CORS

## Настройка прокси

В проекте настроен прокси через Vite для решения проблем с CORS:

1. API запросы проксируются через `/api` на бэкенд API (по умолчанию `http://127.0.0.1:8000`)
2. Запросы к TMDB для постеров отправляются напрямую (без прокси)

Настройка находится в файле `vite.config.js`. При необходимости можно изменить целевые URL.

## Подключение к бэкенду

Есть два способа подключения к бэкенду:

### Способ 1: Через прокси (для локальной разработки)
- Используйте настроенный прокси в Vite
- В файле `src/App.jsx` уже установлены константы:
  ```javascript
  export const API_BASE_URL = "/api";
  export const POSTER_BASE_URL = "https://image.tmdb.org/t/p/w500";
  ```

### Способ 2: Прямое подключение (для VPN)
- В файле `src/App.jsx` измените константу API_BASE_URL на актуальный адрес бэкенда
- Авторизуйтесь на сайте-посреднике с паролем (узнать от бэка)
- Попросите добавить ваш локальный адрес к бэку в allow-origins

## Сервис для работы с API

В проекте добавлен сервис `src/services/api.js` для удобной работы с API через axios:

```javascript
import api, { formatPosterUrl } from './services/api';

// Пример использования
api.get('/movie/123')
  .then(response => console.log(response.data))
  .catch(error => console.error(error));

// Форматирование URL постера
const posterUrl = formatPosterUrl(movie.poster_url);
```
